<div class="col-xs-12 page-list">
  <div class="action-buttons">
    <button class="btn btn-primary">
      <a class="btn-primary" (click)="registerManuscript()">
        <span class="glyphicon glyphicon-plus icon-inside-btn"></span> Registrar
      </a>
    </button>
  </div>
  <div class="center table-content">
    <table class="table table-striped table-hover">
      <thead class="header-sort">
      <tr>
        <th class="col-xs-1 text-align-left">No.</th>
        <th class="col-xs-3 text-align-left">Titulo</th>
        <th class="col-xs-2 text-align-left">Autor</th>
        <th class="col-xs-2 text-align-left">Genero</th>
        <th class="col-xs-2 text-align-left">Estado</th>
        <th class="col-xs-1 text-align-left">Accion</th>
        <th class="col-xs-1 text-align-left">editar</th>
        <th class="col-xs-1 text-align-left">Eliminar</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let manuscript of manusctipts">
        <td class="text-align-left">{{manuscript.id}}</td>
        <td class="text-align-left">{{manuscript.title}}</td>
        <td class="text-align-left">{{manuscript.author}}</td>
        <td class="text-align-left">{{manuscript.gender}}</td>
        <td class="text-align-left">{{manuscript.status}}</td>
        <td class="text-align-left">
          <div *ngIf="manuscript.id_status === 1">
            <button class="btn btn-primary">
              <a (click)="openReaderModal(manuscript, readerModal)">
                <span class="glyphicon glyphicon-plus icon-inside-btn"></span> Enviar a lector
              </a>
            </button>
          </div>

          <div *ngIf="manuscript.id_status === 2">
            <button class="btn btn-primary">
              <a (click)="receiveFromReader(manuscript)">
                <span class="glyphicon glyphicon-plus icon-inside-btn"></span> Recibir de lector
              </a>
            </button>
          </div>

          <div *ngIf="manuscript.id_status === 3">
            <button class="btn btn-primary">
              <a (click)="openEditorModal(manuscript, editorModal)">
                <span class="glyphicon glyphicon-plus icon-inside-btn"></span> Enviar a editor
              </a>
            </button>
          </div>

          <div *ngIf="manuscript.id_status === 4">
            <button class="btn btn-primary">
              <a (click)="receiveFromEditor(manuscript)">
                <span class="glyphicon glyphicon-plus icon-inside-btn"></span> Recibir de editor
              </a>
            </button>
          </div>

          <div *ngIf="manuscript.id_status === 5">
            <button class="btn btn-primary">
              <a (click)="openBookModal(manuscript, bookModal)">
                <span class="glyphicon glyphicon-plus icon-inside-btn"></span> Aprobar
              </a>
            </button>
            <!--<button class="btn btn-danger">
              <a (click)="rejectManuscript(manuscript.id)">
                <span class="glyphicon glyphicon-plus icon-inside-btn"></span> Rechazar
              </a>
            </button>-->
          </div>
        </td>
        <td class="text-align-left">
          <div *ngIf="manuscript.id_status === 1">
            <button type="button" class="btn btn-default btn-sm">
              <a (click)="editManuscript(manuscript.id)">
                <span class="glyphicon glyphicon-plus icon-inside-btn"></span> Editar
              </a>
            </button>
          </div>
        </td>
        <td class="text-align-left">
          <button type="button" class="btn btn-default btn-sm">
          <a (click)="deleteManuscript(manuscript.id)">
              <span class="glyphicon glyphicon-plus icon-inside-btn"></span> Eliminar
            </a>
          </button>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>

<ng-template #readerModal>
  <div class="modal-header">
    <h4>Enviar a lector</h4>
  </div>
  <div class="modal-body">
    <div class="form-group row">
      <label class="col-2 col-form-label">Lector</label>
      <div class="col-10">
        <app-reader-dropdown-component (readerId)="receiveReaderId($event)" id="reader" ></app-reader-dropdown-component>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-2 col-form-label">Fecha de retorno</label>
      <div class="col-10">
        <input type="date" class="form-control" name="date_end_reder" id="date_end_reder" [(ngModel)]="readerDate">
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-default btn-sm">
      <a (click)="sendToReader()">
        <span class="glyphicon glyphicon-plus icon-inside-btn"></span> Enviar
      </a>
    </button>

  </div>
</ng-template>

<ng-template #editorModal>
  <div class="modal-header">
    <h4>Enviar a editor</h4>
  </div>
  <div class="modal-body">
    <div class="form-group row">
      <label class="col-2 col-form-label">Editor</label>
      <div class="col-10">
        <app-editor-dropdown-component (editorId)="receiveEditorId($event)" id="editor" ></app-editor-dropdown-component>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-2 col-form-label">Fecha de retorno</label>
      <div class="col-10">
        <input type="date" class="form-control" name="date_end_editor" id="date_end_editor" [(ngModel)]="editorDate">
      </div>
    </div>

  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-default btn-sm">
      <a (click)="sendToEditor()">
        <span class="glyphicon glyphicon-plus icon-inside-btn"></span> Enviar
      </a>
    </button>

  </div>
</ng-template>


<ng-template #bookModal>
  <div class="modal-header">
    <h4>Crear Libro</h4>
  </div>
  <div class="modal-body">
    <div class="form-group row">
      <label class="col-2 col-form-label">ISBN</label>
      <div class="col-10">
        <input type="text" class="form-control" name="isbn" id="isbn" [(ngModel)]="isbn">
      </div>
    </div>

    <div class="form-group row">
      <label class="col-2 col-form-label">Cantidad Producida</label>
      <div class="col-10">
        <input type="number" class="form-control" name="quantity" id="quantity" [(ngModel)]="quantity">
      </div>
    </div>

    <div class="form-group row">
      <label class="col-2 col-form-label">Precio</label>
      <div class="col-10">
        <input type="number" class="form-control" name="price" id="price" [(ngModel)]="price">
      </div>
    </div>

  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-default btn-sm">
      <a (click)="approveManuscript()">
        <span class="glyphicon glyphicon-plus icon-inside-btn"></span> Crear
      </a>
    </button>
  </div>
</ng-template>
