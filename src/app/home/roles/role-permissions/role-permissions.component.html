<div class="main-content">
  <form [formGroup]="roleFormGroup" (ngSubmit)="saveForm(roleFormGroup.value)" novalidate>
    <div class="action-buttons row">
      <div class="button border_button element_button">
        <a [routerLink]="['/roles']" class="d-flex justify-content-center">
          Volver
        </a>
      </div>
      <h2>rol</h2>
    </div>
    <div class="form-control">

      <div class="form-group row">
        <div class="col-md-4">
          <label for="role" class="col-12 col-form-label">Rol*
            <div class="valid-form" *ngIf="roleFormGroup.controls.role.errors?.required && roleFormGroup.controls.role.touched">
              <strong> Nombre es requerido</strong>
            </div>
            <div class="valid-form" *ngIf="roleFormGroup.controls.role.errors?.minlength">
              <strong> Minimo 4 caracteres </strong>
            </div>
          </label>
          <input class="input_field form_subject" type="text" [(ngModel)]="role.role" id="role" formControlName="role">
        </div>
        <div class="col-md-4">
          <label for="description" class="col-12 col-form-label">Descripcion</label>
          <input class="input_field form_subject" type="text" [(ngModel)]="role.description" id="description" formControlName="description">
        </div>
      </div>
      <div class="form-check-inline">
        Resources
      </div>
      <div class="form-group row">
        <div class="col-md-12">
          <div class="table-content">
            <div class="collapse show" id="collapseExample">
              <ul *ngFor="let resource of rolePermissions; let i = index" style="list-style-type:disc">
                <li [id]="resource.id">
                  {{resource.name}} <input type="checkbox" [checked]="resource.pexecute" [(ngModel)]="rolePermissions[i].pexecute" [name]="resource.id" [id]="resource.id">
                  <div *ngIf="resource.children.length > 0">
                    <ul *ngFor="let child of resource.children" style="margin-left: 15px; list-style-type:circle">
                      <li>
                        {{child.name}}
                        <span class="text-right body-description">
                          <label class="ui-checkbox checkbox-options">
                            <label class="checkbox-dash ng-scope">- -</label>
                          </label>
                        </span>
                        <span class="text-right body-description">
                          <label class="ui-checkbox checkbox-options">
                            <input [checked]="child.pread" type="checkbox" [id]="child.id" [name]="child.id" class="ng-pristine ng-untouched ng-valid ng-scope ng-not-empty" aria-invalid="false">
                          </label>
                        </span>
                        <span class="text-right body-description">
                          <label class="ui-checkbox checkbox-options">
                            <input [checked]="child.pwrite" type="checkbox" [id]="child.id" [name]="child.id" class="ng-pristine ng-untouched ng-valid ng-scope ng-not-empty" aria-invalid="false">
                          </label>
                        </span>
                        <span class="text-right body-description">
                          <label class="ui-checkbox checkbox-options">
                            <input [checked]="child.pcreate" type="checkbox" [id]="child.id" [name]="child.id" data-ng-model="item.permissionWrite" class="ng-pristine ng-untouched ng-valid ng-scope ng-not-empty" aria-invalid="false">
                          </label>
                        </span>
                        <span class="text-right body-description">
                          <label class="ui-checkbox checkbox-options">
                            <input [checked]="child.pdelete" type="checkbox" [id]="child.id" [name]="child.id" class="ng-pristine ng-untouched ng-valid ng-scope ng-not-empty" aria-invalid="false">
                          </label>
                        </span>
                      </li>
                    </ul>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>

    <div class="text-right">
      <button type="submit" class="submit_btn trans_300">Grabar</button>
    </div>

</div>
</form>
</div>
